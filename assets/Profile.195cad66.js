import{r as d,a as A,o as p,c as f,b as a,F as w,j as h,w as c,C as _,u as y,h as C,v as k,d as v,f as P,g as V,i as z,B,k as x,l as M,H as R,I as j,n as L,J as T}from"./index.6cf1da6d.js";import{s as E,g as F}from"./swal.db038e00.js";const I=a("h2",{class:"relative isolate after:absolute after:right-1 after:top-1 after:z-[-1] after:h-full after:w-full after:border-2 after:border-black-100 after:content-['']"},[a("div",{class:"mb-8 border-2 border-black-100 bg-white py-[18px] text-center font-azeret text-xl font-bold text-black-100"}," \u4FEE\u6539\u500B\u4EBA\u8CC7\u6599 ")],-1),J={class:"flex px-4"},$=["onClick"],q=["src"],G={class:"mb-11px relative cursor-pointer bg-black-100 py-1 px-6 text-white"},K=x(" \u4E0A\u50B3\u5927\u982D\u7167 "),O={class:"w-[60.6%]"},Q=a("label",{for:"nickname",class:"mb-1 inline-block text-black-100"},"\u66B1\u7A31",-1),W=a("label",{for:"male",class:"mb-[6px] inline-block text-black-100"},"\u6027\u5225",-1),X={class:"mb-8 flex space-x-6"},Y={class:"relative flex cursor-pointer items-center text-black-100"},Z=["id","value","checked"],ee=a("span",{class:"relative mr-3 inline-block h-5 w-5 rounded-full border-2 border-black-100 before:absolute before:top-1/2 before:left-1/2 before:h-[10px] before:w-[10px] before:-translate-y-1/2 before:-translate-x-1/2 before:rounded-full before:content-[''] peer-checked:before:bg-black-100"},null,-1),ae={key:0,class:"mb-4 text-center text-sm text-red-100"},te=x(" \u9001\u51FA\u66F4\u65B0 "),le={class:"mx-auto max-w-[60.6%]"},oe=a("label",{for:"new-password",class:"mb-1 inline-block text-black-100"},"\u8F38\u5165\u65B0\u5BC6\u78BC",-1),re=a("label",{for:"confirm",class:"mb-1 inline-block text-black-100"},"\u8F38\u5165\u65B0\u5BC6\u78BC",-1),se={key:0,class:"mb-4 text-center text-sm text-red-100"},ne=x(" \u91CD\u8A2D\u5BC6\u78BC "),ue={setup(de){const{user:i}=M(),s=d(!1),m=d("nickname"),u=d(""),b=d(""),U=[{id:"nickname",title:"\u66B1\u7A31\u4FEE\u6539"},{id:"password",title:"\u91CD\u8A2D\u5BC6\u78BC"}],D=[{id:"male",title:"\u7537\u6027"},{id:"female",title:"\u5973\u6027"}],l=d({avatar:"",name:"",gender:"male"}),r=d({password:"",confirmPassword:""});l.value.avatar=i.value.avatar,l.value.name=i.value.name,l.value.gender=i.value.gender;const H=o=>{const e=o.target.files.item(0),n=new FileReader;n.readAsDataURL(e),n.onload=()=>{l.value.avatar=n.result}},N=async()=>{s.value=!0,u.value="";try{const{name:o,gender:e}=l.value;await R({name:o,gender:e}),E({title:"\u66F4\u65B0\u6210\u529F"}),i.value.name=o,i.value.gender=e,u.value=""}catch(o){const e=F(o.message);u.value=e}finally{s.value=!1}},S=async()=>{s.value=!0,b.value="";try{const{password:o,confirmPassword:e}=r.value;await j({password:o,confirm_password:e}),E({title:"\u66F4\u65B0\u6210\u529F"}),b.value="",r.value.password="",r.value.confirmPassword=""}catch(o){const e=F(o.message);b.value=e}finally{s.value=!1}};return(o,e)=>{const n=A("Button");return p(),f(w,null,[I,a("div",J,[(p(),f(w,null,h(U,t=>a("button",{key:t.id,class:L(["rounded-t-lg border-x-2 border-t-2 border-black-100 py-2 px-6",t.id===m.value?"bg-black-100 text-white":"text-black-100"]),onClick:g=>m.value=t.id},v(t.title),11,$)),64))]),c(a("form",{method:"post",class:"flex flex-col items-center rounded-lg border-2 border-black-100 py-8 shadow-card",onSubmit:e[3]||(e[3]=B(()=>{},["prevent"]))},[a("img",{src:l.value.avatar,alt:"avatar",class:"mb-4 h-[107px] w-[107px] rounded-full object-cover",onError:e[0]||(e[0]=(...t)=>y(C)&&y(C)(...t))},null,40,q),a("label",G,[a("input",{type:"file",class:"sr-only",accept:"image/*",onChange:H},null,32),K]),a("div",O,[Q,c(a("input",{id:"nickname",type:"text",class:"mb-4 w-full border-2 border-black-100 py-[14px] px-6 font-azeret leading-[22px] text-black-100","onUpdate:modelValue":e[1]||(e[1]=t=>l.value.name=t)},null,512),[[k,l.value.name,void 0,{trim:!0}]]),W,a("ul",X,[(p(),f(w,null,h(D,t=>a("li",{key:t.id},[a("label",Y,[c(a("input",{"onUpdate:modelValue":e[2]||(e[2]=g=>l.value.gender=g),type:"radio",name:"gender",class:"peer sr-only",id:t.id,value:t.id,checked:l.value.gender===t.id},null,8,Z),[[T,l.value.gender]]),ee,x(" "+v(t.title),1)])])),64))]),u.value?(p(),f("p",ae,v(u.value),1)):P("",!0),V(n,{class:"w-full rounded-lg border-2 border-black-100 bg-yellow-100 font-azeret font-bold leading-[50px] text-black-100 shadow-btn hover:bg-primary hover:text-white",loading:s.value,onClick:N},{default:z(()=>[te]),_:1},8,["loading"])])],544),[[_,m.value==="nickname"]]),c(a("form",{method:"post",class:"rounded-lg border-2 border-black-100 py-8 shadow-card",onSubmit:e[6]||(e[6]=B(()=>{},["prevent"]))},[a("div",le,[oe,c(a("input",{id:"new-password",type:"password",class:"mb-4 w-full border-2 border-black-100 py-[14px] px-6 text-black-100",placeholder:"\u8ACB\u8F38\u5165\u65B0\u5BC6\u78BC","onUpdate:modelValue":e[4]||(e[4]=t=>r.value.password=t)},null,512),[[k,r.value.password]]),re,c(a("input",{id:"confirm",type:"password",class:"mb-8 w-full border-2 border-black-100 py-[14px] px-6 text-black-100",placeholder:"\u518D\u6B21\u8F38\u5165\u65B0\u5BC6\u78BC","onUpdate:modelValue":e[5]||(e[5]=t=>r.value.confirmPassword=t)},null,512),[[k,r.value.confirmPassword]]),b.value?(p(),f("p",se,v(b.value),1)):P("",!0),V(n,{class:"block w-full rounded-lg border-2 border-gray-100 bg-gray-200 font-azeret font-bold leading-[50px] text-white",loading:s.value,onClick:S},{default:z(()=>[ne]),_:1},8,["loading"])])],544),[[_,m.value==="password"]])],64)}}};export{ue as default};
