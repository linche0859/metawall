import{r as c,k as S,l as A,b as p,c as f,m as a,F as k,f as _,n as r,B as h,v as w,p as v,g as y,d as C,w as P,A as V,h as x,i as M,G as R,H as L,q as T,I as j}from"./index.7d4108ae.js";import{s as z,g as B}from"./swal.db038e00.js";const q=a("h2",{class:"relative isolate after:absolute after:right-1 after:top-1 after:z-[-1] after:h-full after:w-full after:border-2 after:border-black-100 after:content-['']"},[a("div",{class:"mb-8 border-2 border-black-100 bg-white py-[18px] text-center font-azeret text-xl font-bold text-black-100"}," \u4FEE\u6539\u500B\u4EBA\u8CC7\u6599 ")],-1),G={class:"flex px-4"},I=["onClick"],$=["src"],J={class:"mb-11px relative cursor-pointer bg-black-100 py-1 px-6 text-white"},K=x(" \u4E0A\u50B3\u5927\u982D\u7167 "),O={class:"w-[60.6%]"},Q=a("label",{for:"nickname",class:"mb-1 inline-block text-black-100"},"\u66B1\u7A31",-1),W=a("label",{for:"male",class:"mb-[6px] inline-block text-black-100"},"\u6027\u5225",-1),X={class:"mb-8 flex space-x-6"},Y={class:"relative flex cursor-pointer items-center text-black-100"},Z=["id","value","checked"],ee=a("span",{class:"relative mr-3 inline-block h-5 w-5 rounded-full border-2 border-black-100 before:absolute before:top-1/2 before:left-1/2 before:h-[10px] before:w-[10px] before:-translate-y-1/2 before:-translate-x-1/2 before:rounded-full before:content-[''] peer-checked:before:bg-black-100"},null,-1),ae={key:0,class:"mb-4 text-center text-sm text-red-100"},te=x(" \u9001\u51FA\u66F4\u65B0 "),le={class:"mx-auto max-w-[60.6%]"},oe=a("label",{for:"new-password",class:"mb-1 inline-block text-black-100"},"\u8F38\u5165\u65B0\u5BC6\u78BC",-1),se=a("label",{for:"confirm",class:"mb-1 inline-block text-black-100"},"\u8F38\u5165\u65B0\u5BC6\u78BC",-1),re={key:0,class:"mb-4 text-center text-sm text-red-100"},ne=x(" \u91CD\u8A2D\u5BC6\u78BC "),ue={setup(de){const{user:i}=M(),n=c(!1),m=c("nickname"),u=c(""),b=c(""),D=[{id:"nickname",title:"\u66B1\u7A31\u4FEE\u6539"},{id:"password",title:"\u91CD\u8A2D\u5BC6\u78BC"}],F=[{id:"male",title:"\u7537\u6027"},{id:"female",title:"\u5973\u6027"}],l=c({avatar:"",name:"",gender:"male"}),s=c({password:"",confirmPassword:""});l.value.avatar=i.value.avatar,l.value.name=i.value.name,l.value.gender=i.value.gender;const U=o=>{const e=o.target.files.item(0),d=new FileReader;d.readAsDataURL(e),d.onload=()=>{l.value.avatar=d.result}},E=async()=>{n.value=!0,u.value="";try{const{name:o,gender:e}=l.value;await R({name:o,gender:e}),z({title:"\u66F4\u65B0\u6210\u529F"}),i.value.name=o,i.value.gender=e,u.value=""}catch(o){const e=B(o.message);u.value=e}finally{n.value=!1}},H=async()=>{n.value=!0,b.value="";try{const{password:o,confirmPassword:e}=s.value;await L({password:o,confirm_password:e}),z({title:"\u66F4\u65B0\u6210\u529F"}),b.value="",s.value.password="",s.value.confirmPassword=""}catch(o){const e=B(o.message);b.value=e}finally{n.value=!1}};return(o,e)=>{const d=S("Button"),N=A("img-avatar-fallback");return p(),f(k,null,[q,a("div",G,[(p(),f(k,null,_(D,t=>a("button",{key:t.id,class:T(["rounded-t-lg border-x-2 border-t-2 border-black-100 py-2 px-6",t.id===m.value?"bg-black-100 text-white":"text-black-100"]),onClick:g=>m.value=t.id},v(t.title),11,I)),64))]),r(a("form",{method:"post",class:"flex flex-col items-center rounded-lg border-2 border-black-100 py-8 shadow-100",onSubmit:e[2]||(e[2]=V(()=>{},["prevent"]))},[r(a("img",{src:l.value.avatar,alt:"avatar",class:"mb-4 h-[107px] w-[107px] rounded-full object-cover"},null,8,$),[[N]]),a("label",J,[a("input",{type:"file",class:"sr-only",accept:"image/*",onChange:U},null,32),K]),a("div",O,[Q,r(a("input",{id:"nickname",type:"text",class:"mb-4 w-full border-2 border-black-100 py-[14px] px-6 font-azeret leading-[22px] text-black-100","onUpdate:modelValue":e[0]||(e[0]=t=>l.value.name=t)},null,512),[[w,l.value.name,void 0,{trim:!0}]]),W,a("ul",X,[(p(),f(k,null,_(F,t=>a("li",{key:t.id},[a("label",Y,[r(a("input",{"onUpdate:modelValue":e[1]||(e[1]=g=>l.value.gender=g),type:"radio",name:"gender",class:"peer sr-only",id:t.id,value:t.id,checked:l.value.gender===t.id},null,8,Z),[[j,l.value.gender]]),ee,x(" "+v(t.title),1)])])),64))]),u.value?(p(),f("p",ae,v(u.value),1)):y("",!0),C(d,{class:"w-full rounded-lg border-2 border-black-100 bg-yellow-100 font-azeret font-bold leading-[50px] text-black-100 shadow-200 hover:bg-primary hover:text-white",loading:n.value,onClick:E},{default:P(()=>[te]),_:1},8,["loading"])])],544),[[h,m.value==="nickname"]]),r(a("form",{method:"post",class:"rounded-lg border-2 border-black-100 py-8 shadow-100",onSubmit:e[5]||(e[5]=V(()=>{},["prevent"]))},[a("div",le,[oe,r(a("input",{id:"new-password",type:"password",class:"mb-4 w-full border-2 border-black-100 py-[14px] px-6 text-black-100",placeholder:"\u8ACB\u8F38\u5165\u65B0\u5BC6\u78BC","onUpdate:modelValue":e[3]||(e[3]=t=>s.value.password=t)},null,512),[[w,s.value.password]]),se,r(a("input",{id:"confirm",type:"password",class:"mb-8 w-full border-2 border-black-100 py-[14px] px-6 text-black-100",placeholder:"\u518D\u6B21\u8F38\u5165\u65B0\u5BC6\u78BC","onUpdate:modelValue":e[4]||(e[4]=t=>s.value.confirmPassword=t)},null,512),[[w,s.value.confirmPassword]]),b.value?(p(),f("p",re,v(b.value),1)):y("",!0),C(d,{class:"block w-full rounded-lg border-2 border-gray-100 bg-gray-200 font-azeret font-bold leading-[50px] text-white",loading:n.value,onClick:H},{default:P(()=>[ne]),_:1},8,["loading"])])],544),[[h,m.value==="password"]])],64)}}};export{ue as default};
